!function(a){function b(a,b,c){this.paper.queue.push({assign:a,params:b,loaded:c})}function c(a,b){for(var c=0;c<b.length;c++)if(b[c].element.isEqualNode(a))return b[c];return!1}function d(a,b){for(var c=b||["x","y","width","height"],d={},g=0;g<a.length;g++)"object"==typeof a[g]?d.style=a[g]:c.length&&(d[c.shift()]=a[g]);return d.style=e(d.style),d=f(d)}function e(a){return a||(a={}),a.border&&(a.border=a.border.split(" "),a.borderSize||(a.borderSize=a.border[0]),a.borderStyle||(a.borderStyle=a.border[1]),a.borderColor||(a.borderColor=a.border[2])),a.borderSize&&(a.borderSize=a.borderSize.replace(/[^0-9]/g,"")),a.borderStyle?"solid"===a.borderStyle?a.borderStyle=[]:"dashed"===a.borderStyle?a.borderStyle=[12]:"dotted"===a.borderStyle&&(a.borderStyle=[3]):a.borderStyle=[],a}function f(a){var b=a.hasOwnProperty("x")&&(a.hasOwnProperty("width")||a.hasOwnProperty("r")),c=a.hasOwnProperty("y")&&(a.hasOwnProperty("height")||a.hasOwnProperty("width")||a.hasOwnProperty("r"));if(!b&&!c)return a;var d=t.getPaper(),e=d.element.width,f=d.element.height,g=a.r||0,h=a.width||g,i=a.height||h,j={x:["right","center","left"],y:["top","center","bottom"]};return b&&(-1!==j.x.indexOf(a.x)?"right"===a.x?a.x=g?e:e-h:"center"===a.x?a.x=g?e/2:(e-h)/2:"left"===a.x&&(a.x=0):"%"===(a.x+"").substr(-1)&&(a.x=e*parseInt(a.x,10)/100)),c&&(-1!==j.y.indexOf(a.y)?"top"===a.y?a.y=0:"center"===a.y?a.y=g?f/2:(f-i)/2:"bottom"===a.y&&(a.y=g?f:f-i):"%"===(a.y+"").substr(-1)&&(a.y=f*parseInt(a.y,10)/100)),a}function g(){for(var a=0;a<document.styleSheets.length;a++){var b=document.styleSheets[a],c=b.cssRules?b.cssRules:b.rules;u.documentStyles.push(c)}}function h(a,b,c){for(var d in b)x.call(b,d)&&("constructor"!==d||a!==global)&&(void 0===b[d]?delete a[d]:c&&"undefined"!=typeof a[d]||(a[d]=b[d]));return a}function i(a,b){for(var c=0;c<b.length;c++)if(b[c].selectorText&&b[c].selectorText.toLowerCase()===a)return b[c].style}function j(a){if(null==a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function k(a){this.paper=a}function l(a){var b=a.args,c=b.style,d=u.defaults.arc;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(c.borderStyle),this.paper.ctx.arc(b.x,b.y,b.r||d.radius,b.sAngle||0,b.eAngle||2*Math.PI),this.paper.ctx.fillStyle=c.background||c.bg?c.background||c.bg:d.background,this.paper.ctx.fill(),this.paper.ctx.lineWidth=c.borderSize?c.borderSize:d.lineWidth,this.paper.ctx.strokeStyle=c.borderColor?c.borderColor:d.strokeStyle,this.paper.ctx.stroke(),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function m(a){var b=a.image,c=a.x,d=a.y,e=a.width,f=a.height;this.paper.ctx.save(),this.paper.flip&&("horizontal"===this.paper.flip&&(this.paper.ctx.scale(-1,1),e=-1*e),"vertical"===this.paper.flip&&(this.paper.ctx.scale(1,-1),f=-1*f)),this.paper.ctx.beginPath(),this.paper.ctx.drawImage(b,Math.floor(c||0),Math.floor(d||0),e,f),this.paper.ctx.closePath(),this.paper.ctx.restore()}function n(a){var b=u.defaults.line,c=a.style,d=a.pointA,e=a.pointB;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(c.borderStyle),this.paper.ctx.moveTo(d.x||0,d.y||0),this.paper.ctx.lineTo(e.x||0,e.y||0),this.paper.ctx.lineWidth=c.borderSize?c.borderSize:b.lineWidth,this.paper.ctx.strokeStyle=c.borderColor?c.borderColor:b.strokeStyle,this.paper.ctx.stroke(),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function o(a){var b=a.args,c=a.style,d=u.defaults.polygon;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(c.borderStyle),this.paper.ctx.fillStyle=c.background?c.background:d.background,this.paper.ctx.lineWidth=c.borderSize?c.borderSize:d.lineWidth,this.paper.ctx.strokeStyle=c.borderColor?c.borderColor:d.strokeStyle;for(var e=0;e<b.length;e++)b[e].x&&(e?this.paper.ctx.lineTo(b[e].x,b[e].y):this.paper.ctx.moveTo(b[e].x,b[e].y));this.paper.ctx.fill(),this.paper.ctx.stroke(),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function p(a){var b=u.defaults.rect,c=a.style,d=a.args;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(c.borderStyle),this.paper.ctx.fillStyle=c.background?c.background:b.background,this.paper.ctx.fillRect(d.x,d.y,d.width,d.height||d.width),this.paper.ctx.lineWidth=c.borderSize?c.borderSize:b.lineWidth,this.paper.ctx.strokeStyle=c.borderColor?c.borderColor:b.strokeStyle,this.paper.ctx.strokeRect(d.x,d.y,d.width,d.height||d.width),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}function q(a){var b=a.properties,c=a.width/b.frames;r.call(this,{image:a.image,posX:0,posY:0,frame:b.frames,loop:b.loop,width:c,widthTotal:a.width,height:a.height,dx:a.x,dy:a.y,speed:b.speed,animation:null})}function r(b){var c=this;if(b.posX===b.widthTotal){if(b.loop===!1)return void a.cancelAnimationFrame(b.animation);b.posX=0}c.paper.ctx.clearRect(b.dx,b.dy,b.width,b.height),c.paper.ctx.beginPath(),c.paper.ctx.drawImage(b.image,b.posX,b.posY,b.width,b.height,b.dx,b.dy,b.width,b.height),c.paper.ctx.closePath(),b.posX=b.posX+b.width,setTimeout(function(){b.animation=a.requestAnimationFrame(r.bind(c,b))},b.speed)}function s(a){var b=u.defaults.text,c=a.text,d=a.x,e=a.y,f=a.style;this.paper.ctx.beginPath(),this.paper.ctx.setLineDash(f.borderStyle),this.paper.ctx.lineWidth=f.borderSize?f.borderSize:b.lineWidth,this.paper.ctx.strokeStyle=f.borderColor?f.borderColor:b.strokeStyle,this.paper.ctx.font=f.font||b.font,this.paper.ctx.fillStyle=f.color||b.color,this.paper.ctx.textAlign=f.align||b.align,this.paper.ctx.fillText(c,d,e),this.paper.ctx.strokeText(c,d,e),this.paper.ctx.fill(),this.paper.ctx.stroke(),this.paper.ctx.setLineDash([]),this.paper.ctx.closePath()}var t={paper:null},u={documentStyles:[],virtualStyles:{},contexts:[],defaults:{arc:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},rect:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},polygon:{background:"rgba(0, 0, 0, 0)",strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},line:{strokeStyle:"rgba(0, 0, 0, 0)",lineWidth:null},text:{font:"14px Helvetica",strokeStyle:"rgba(0, 0, 0, 0)",color:"#000",lineWidth:null}}},v="[origami.js]";t.warning=function(a,b){console&&console.warn&&console.warn(v,a,b)},t.error=function(a){throw new Error(v.concat(" "+a))},t.init=function(a){a=a.canvas?a.canvas:document.querySelector(a),a||this.error("Please use a valid selector or canvas context");var b=c(a,u.contexts);if(b)return this.paper=b,this;a.getContext||this.error("Please verify if it's a valid canvas element");var d=a.getContext("2d"),e={element:a,queue:[],index:u.contexts.length,flip:!1,frame:null,ctx:d,width:a.width,height:a.height};return u.contexts.push(e),this.paper=e,this},t.styles=function(){this.documentStyles||g(t);var a=arguments;if(!a.length)return this;for(var b=0;b<a.length;b++){var c=i(a[b],this.documentStyles[0]||[]);t.virtualStyles[a[b]]=c}return this},t.getPaper=function(){return this.paper},t.canvasCtx=function(){return this.paper.ctx},t.getContexts=function(){return u.contexts},t.cleanContexts=function(){u.contexts=[]},t.draw=function(a){var b=this,c=new k(b.paper),d=b.paper.queue;return setTimeout(function(){for(var a=0;a<d.length;a++)(d[a].loaded===!1||d[a].failed)&&t.warning("couldn't able to load:",d[a].params),c[d[a].assign](d[a].params);b.paper.queue=[]},a),b},t.load=function(a){var b=j(this);b.paper=this.paper;var c=setInterval(function(){var d=b.paper.queue.filter(function(a){return a.loaded===!1&&!a.failed});d.length||(clearInterval(c),a.bind(b,b)())},200)};var w=b.bind(t),x=Object.prototype.hasOwnProperty;k.prototype.translate=function(a){this.paper.ctx.translate(a.x,a.y)},k.prototype.background=function(a){this.paper.element.style.backgroundColor=a.color},k.prototype.restore=function(){this.paper.ctx.restore()},k.prototype.save=function(){this.paper.ctx.save()},k.prototype.composition=function(a){this.paper.ctx.globalCompositeOperation=a.globalComposite},k.prototype.rotate=function(a){this.paper.ctx.rotate(a.degrees)},k.prototype.stop=function(){a.cancelAnimationFrame(this.paper.frame),this.paper.frame=!1},k.prototype.nextFrame=function(b){this.paper.frame=a.requestAnimationFrame(b.fn)},k.prototype.scale=function(a){this.paper.ctx.scale(a.width,a.height)},k.prototype.flip=function(){this.paper.flip="horizontal",type&&"string"==typeof type&&(this.paper.flip=type)},k.prototype.flipEnd=function(){this.paper.flip=!1},k.prototype.clear=function(){this.paper.ctx.clearRect(0,0,this.paper.width,this.paper.height)},k.prototype.on=function(a){this.paper.element.addEventListener(a.ev,a.fn)},k.prototype.arc=l,t.arc=function(){var a=[].slice.call(arguments);return a=d(a,["x","y","r","sAngle","eAngle"]),w("arc",{args:a}),this},k.prototype.image=m,t.image=function(a,b,c,d,e){var g=this;if(!a)return this;if("string"==typeof a){var h=new Image;h.src=a,a=h}var i=f({image:a,x:b,y:c,width:d,height:e});if(a.complete)return i.width=d||a.naturalWidth,i.height=e||a.naturalHeight,w("image",f(i)),g;w("image",i,!1);var j=g.paper.queue.length-1,k=u.contexts[this.paper.index].queue[j];return a.addEventListener("load",function(){return k?(k.params.width=i.width||a.naturalWidth,k.params.height=i.height||a.naturalHeight,void(k.loaded=!0)):!1}),a.addEventListener("error",function(){return k?void(k.failed=!0):!1}),g},k.prototype.line=n,t.line=function(a,b,c){return c=e(c),w("line",{pointA:a,pointB:b,style:c}),this},k.prototype.polygon=o,t.polygon=function(){var a=[].slice.call(arguments),b=d(a);return w("polygon",{style:b.style,args:a}),this},k.prototype.rect=p,t.rect=function(){var a=[].slice.call(arguments);return a=d(a),w("rect",{style:a.style,args:a}),this},k.prototype.sprite=q,t.sprite=function(a,b,c){var d=this;if(!c||!c.src)return this;var e=new Image;c.frames||0,c.loop||!0,c.speed||10;e.src=c.src;var g=f({x:a,y:b,image:e,properties:c,width:0,height:0});if(e.complete)return g.width=e.naturalWidth,g.height=e.naturalHeight,w("sprite",f(g)),d;w("sprite",g,!1);var h=d.paper.queue.length-1,i=u.contexts[this.paper.index].queue[h];return e.addEventListener("load",function(){return i?(i.params.width=e.naturalWidth,i.params.height=e.naturalHeight,void(i.loaded=!0)):!1}),e.addEventListener("error",function(){return i?void(i.failed=!0):!1}),this},k.prototype.text=s,t.text=function(a,b,c,d){return d=e(d),w("text",{text:a,x:b,y:c,style:d}),this},t.background=function(a){return w("background",{color:a}),this},t.restore=function(){return w("restore"),this},t.save=function(){return w("save"),this},t.composition=function(a){return w("composition",{globalComposite:a}),this},t.translate=function(a,b){return(void 0===a||null===a)&&(a="reset"),"string"==typeof a&&("center"===a&&(a=context.width/2,b=context.height/2),"reset"===a&&(a=-context.width/2,b=-context.height/2)),w("translate",{x:a,y:b}),this},t.rotate=function(a){return"undefined"==typeof a&&(a="slow"),"string"==typeof a&&("slow"===a?a=2*Math.PI/60*(new Date).getSeconds()+2*Math.PI/6e4*(new Date).getMilliseconds():"normal"===a?a=2*Math.PI/30*(new Date).getSeconds()+2*Math.PI/3e4*(new Date).getMilliseconds():"fast"===a&&(a=2*Math.PI/6*(new Date).getSeconds()+2*Math.PI/6e3*(new Date).getMilliseconds())),w("rotate",{degrees:a}),this},t.stop=function(){return w("stop"),this},t.nextFrame=function(a){return w("nextFrame",{fn:a}),this},t.scale=function(a,b){return w("scale",{width:a,height:b}),this},t.flip=function(a){return w("flip",{type:a}),this},t.flipEnd=function(){return w("flipEnd"),this},t.clear=function(){return w("clear"),this},t.on=function(a,b){return w("on",{ev:a,fn:b}),this},"undefined"!=typeof module&&module&&module.exports&&(module.exports=h(t.init.bind(this),t)),"undefined"!=typeof exports&&exports&&(exports.origami=h(t.init.bind(this),t)),"object"==typeof a&&(a.origami=h(t.init.bind(t),t))}(function(){return this}());
//# sourceMappingURL=origami.min.js.map